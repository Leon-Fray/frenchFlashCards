<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>French Flashcard</title>
<style>
body {
font-family: Arial, sans-serif;
background: #546373;
height: 100vh;
margin: 0;
display: flex;
align-items: center;
justify-content: center;
}
.center-content {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
}
.flashcard {
background: #546373;
width: 600px;
height: 360px;
border-radius: 15px;
box-shadow: 0 6px 12px rgba(0,0,0,0.1);
display: flex;
align-items: center;
justify-content: center;
font-size: 48px;
cursor: pointer;
perspective: 1000px;
margin-bottom: 60px;
position: relative;
transition: transform 0.6s;
 }
.flashcard-container {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
text-align: center;
 }
.flashcard-inner {
width: 100%;
height: 100%;
transition: transform 0.6s;
transform-style: preserve-3d;
position: relative;
 }
.flashcard.flipped .flashcard-inner {
transform: rotateY(180deg);
 }
.front, .back {
position: absolute;
width: 100%;
height: 100%;
backface-visibility: hidden;
border-radius: 15px;
display: flex;
align-items: center;
justify-content: center;
padding: 20px;
box-sizing: border-box;
 }
.front {
background:#6d7996;
color: black;
 }
.back {
/* background: #6D8196; */
background: #6d7896;
color: black;
transform: rotateY(180deg);
 }
button {
padding: 10px 20px;
font-size: 18px;
border: none;
background-color: #007bff;
color: white;
border-radius: 5px;
cursor: pointer;
margin: 0 auto;
display: block;
 }
button:hover {
background-color: #0056b3;
 }
.loading {
font-size: 24px;
color: white;
}
.error {
font-size: 18px;
color: #ff6b6b;
background: white;
padding: 20px;
border-radius: 10px;
margin: 20px;
}
</style>
</head>
<body>
<div class="flashcard-container">
<div class="flashcard" onclick="flipCard()" id="card">
<div class="flashcard-inner" id="card-inner">
<div class="front" id="front-text">Loading...</div>
<div class="back" id="back-text">Please wait...</div>
</div>
</div>
<button onclick="nextCard()" id="next-btn" disabled>Next</button>
</div>
<script>
let wordBank = [];
let shuffledIndices = [];
let currentIndex = 0;

// Function to shuffle an array using Fisher-Yates algorithm
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// Function to create shuffled indices for random card order
function createShuffledIndices() {
    const indices = Array.from({ length: wordBank.length }, (_, i) => i);
    shuffledIndices = shuffleArray(indices);
    currentIndex = 0;
}

// Function to load word bank from JSON file
async function loadWordBank() {
    try {
        const response = await fetch('word_bank.json');
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const data = await response.json();
        
        // Convert the JSON object to array format expected by the flashcard
        wordBank = Object.entries(data).map(([french, english]) => ({
            french: french,
            english: english
        }));
        
        // Create shuffled order and show first card
        createShuffledIndices();
        document.getElementById('next-btn').disabled = false;
        showCurrentCard();
        
    } catch (error) {
        console.error('Error loading word bank:', error);
        
        // Fallback: Load a few sample words if JSON fails
        wordBank = [
            { french: "Salut", english: "Hi/Hello" },
            { french: "Oui", english: "Yes" },
            { french: "Merci beaucoup", english: "Thank you very much" },
            { french: "Je comprends", english: "I understand" },
            { french: "C'est important", english: "It's important" }
        ];
        
        // Create shuffled order and show first card
        createShuffledIndices();
        document.getElementById('next-btn').disabled = false;
        showCurrentCard();
        
        // Show error message in console
        console.warn('Using fallback data. To fix: serve files through HTTP server (not file://)');
    }
}

function showCurrentCard() {
    if (wordBank.length === 0 || shuffledIndices.length === 0) return;
    
    const randomIndex = shuffledIndices[currentIndex];
    const card = document.getElementById("card");
    card.classList.remove("flipped");
    document.getElementById("front-text").textContent = wordBank[randomIndex].french;
    document.getElementById("back-text").textContent = wordBank[randomIndex].english;
}

function flipCard() {
    if (wordBank.length === 0) return;
    
    const card = document.getElementById("card");
    card.classList.toggle("flipped");
}

function nextCard() {
    if (wordBank.length === 0) return;
    
    // Move to next card in shuffled order
    currentIndex = (currentIndex + 1) % shuffledIndices.length;
    
    // If we've gone through all cards, reshuffle for variety
    if (currentIndex === 0) {
        createShuffledIndices();
    }
    
    showCurrentCard();
}

// Load word bank when page loads
loadWordBank();
</script>
</body>
</html>